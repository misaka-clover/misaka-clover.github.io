<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="叶子"><meta name="copyright" content="叶子"><meta name="generator" content="Hexo 7.2.0"><meta name="theme" content="hexo-theme-yun"><title>SQL 学习笔记【02】 | 叶子的花园</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.4.1/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"mskclover.com","root":"/","title":"叶子的花园","version":"1.10.11","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"搜索...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"/data/sentences.json"},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]},"vendors":{"host":"https://fastly.jsdelivr.net/npm/","darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><link rel="alternate" href="/atom.xml" title="叶子的花园" type="application/atom+xml"><script src="/" async></script><script src="/j" async></script><script src="/a" async></script><script src="/v" async></script><script src="/a" async></script><script src="/s" async></script><script src="/c" async></script><script src="/r" async></script><script src="/i" async></script><script src="/p" async></script><script src="/t" async></script><script src="/" async></script><script src="/g" async></script><script src="/o" async></script><script src="/o" async></script><script src="/g" async></script><script src="/l" async></script><script src="/e" async></script><script src="/a" async></script><script src="/d" async></script><script src="/." async></script><script src="/j" async></script><script src="/s" async></script><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-6VWG03H880"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-6VWG03H880');
}</script><script data-ad-client="pub-4618904761682457" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><meta name="description" content="开始深入（我仿佛逐渐理解了一切）">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL 学习笔记【02】">
<meta property="og:url" content="https://mskclover.com/2022/10/18/SQL-learning-note-02/index.html">
<meta property="og:site_name" content="叶子的花园">
<meta property="og:description" content="开始深入（我仿佛逐渐理解了一切）">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://mskclover.com/images/SQL-learning-note-02/sql02-cover.jpg">
<meta property="og:image" content="https://mskclover.com/images/SQL-learning-note-02/sql02-01-01.jpg">
<meta property="og:image" content="https://mskclover.com/images/SQL-learning-note-02/sql02-01-02.jpg">
<meta property="og:image" content="https://mskclover.com/images/SQL-learning-note-02/sql02-02-01.jpg">
<meta property="og:image" content="https://mskclover.com/images/SQL-learning-note-02/sql02-02-02.jpg">
<meta property="og:image" content="https://mskclover.com/images/SQL-learning-note-02/sql02-02-03.jpg">
<meta property="og:image" content="https://mskclover.com/images/SQL-learning-note-02/sql02-04-01.jpg">
<meta property="og:image" content="https://mskclover.com/images/SQL-learning-note-02/sql02-04-02.jpg">
<meta property="article:published_time" content="2022-10-18T07:09:34.000Z">
<meta property="article:modified_time" content="2023-03-20T05:03:28.000Z">
<meta property="article:author" content="叶子">
<meta property="article:tag" content="博文">
<meta property="article:tag" content="知识">
<meta property="article:tag" content="笔记">
<meta property="article:tag" content="SQL">
<meta property="article:tag" content="《SQL基础教程》">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mskclover.com/images/SQL-learning-note-02/sql02-cover.jpg"><script>(function() {
  if (CONFIG.mode !== 'auto') return
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="叶子"><img width="96" loading="lazy" src="/images/avatar/avatar.jpg" alt="叶子"><span class="site-author-status" title="今天也是美好的一天呢">🥬</span></a><div class="site-author-name"><a href="/about/">叶子</a></div><a class="site-name" href="/about/site.html">叶子的花园</a><sub class="site-subtitle">靡不有初，鲜克有终</sub><div class="site-description">@Misaka-Clover</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">47</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">10</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">119</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="留言板"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:clipboard-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><span class="icon iconify" data-icon="ri:rss-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/misaka-clover" title="GitHub" target="_blank" style="color:#181717"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/Misaka_Clover" title="Twitter" target="_blank" style="color:#1da1f2"><span class="icon iconify" data-icon="ri:twitter-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://g0v.social/@Misaka_Clover" title="Mastodon" target="_blank" style="color:purple"><span class="icon iconify" data-icon="ri:mastodon-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:cover@mskclover.com" title="E-Mail" target="_blank" style="color:#8E71C1"><span class="icon iconify" data-icon="ri:mail-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.travellings.cn/go.html" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><span class="icon iconify" data-icon="ri:train-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:genderless-line"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-%E4%B8%AD%E7%9A%84%E5%B8%B8%E6%95%B0"><span class="toc-number">1.</span> <span class="toc-text">SQL 中的常数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E6%A0%BC%E5%88%9B%E5%BB%BA%E3%80%81%E5%88%A0%E9%99%A4%E4%B8%8E%E6%9B%B4%E6%96%B0"><span class="toc-number">2.</span> <span class="toc-text">表格创建、删除与更新</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93-CREAT-DATABASE"><span class="toc-number">2.1.</span> <span class="toc-text">创建数据库 CREAT DATABASE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8-CREAT-TABLE"><span class="toc-number">2.2.</span> <span class="toc-text">创建表 CREAT TABLE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8-DROP-TABLE"><span class="toc-number">2.3.</span> <span class="toc-text">删除表 DROP TABLE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E8%A1%A8%E7%9A%84%E5%AE%9A%E4%B9%89-ALTER-TABLE"><span class="toc-number">2.4.</span> <span class="toc-text">更新表的定义 ALTER TABLE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE-INSERT-INTO"><span class="toc-number">2.5.</span> <span class="toc-text">插入数据 INSERT INTO</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.</span> <span class="toc-text">数据库的基本查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%88%97-SELECT"><span class="toc-number">3.1.</span> <span class="toc-text">查询列 SELECT</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%AB%E5%90%8D%E5%85%B3%E9%94%AE%E5%AD%97-AS"><span class="toc-number">3.1.1.</span> <span class="toc-text">别名关键字 AS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%B8%B8%E6%95%B0"><span class="toc-number">3.1.2.</span> <span class="toc-text">查询常数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%BB%E9%87%8D%E5%85%B3%E9%94%AE%E5%AD%97-DISTINCT"><span class="toc-number">3.1.3.</span> <span class="toc-text">去重关键字 DISTINCT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E5%85%B3%E9%94%AE%E5%AD%97-WHERE"><span class="toc-number">3.1.4.</span> <span class="toc-text">条件关键字 WHERE</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">3.2.</span> <span class="toc-text">算数运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">3.3.</span> <span class="toc-text">比较运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A4%E6%96%AD-NULL"><span class="toc-number">3.3.1.</span> <span class="toc-text">判断 NULL</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">3.4.</span> <span class="toc-text">逻辑运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E5%80%BC%E9%80%BB%E8%BE%91%EF%BC%88NULL-%E7%9A%84%E7%9C%9F%E5%80%BC%EF%BC%89"><span class="toc-number">3.4.1.</span> <span class="toc-text">三值逻辑（NULL 的真值）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%81%9A%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.</span> <span class="toc-text">数据库的聚合查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E6%95%B0-COUNT"><span class="toc-number">4.1.</span> <span class="toc-text">总数 COUNT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B1%82%E5%92%8C-SUM"><span class="toc-number">4.2.</span> <span class="toc-text">求和 SUM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%87%E5%80%BC-AVG"><span class="toc-number">4.3.</span> <span class="toc-text">均值 AVG</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E5%A4%A7-MAX-%E4%B8%8E%E6%9C%80%E5%B0%8F-MIN"><span class="toc-number">4.4.</span> <span class="toc-text">最大 MAX 与最小 MIN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%BB%E9%87%8D-DISTINCT"><span class="toc-number">4.5.</span> <span class="toc-text">去重 DISTINCT</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%88%86%E7%BB%84"><span class="toc-number">5.</span> <span class="toc-text">数据库的分组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84-GRUOP-BY"><span class="toc-number">5.1.</span> <span class="toc-text">分组 GRUOP BY</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">5.1.1.</span> <span class="toc-text">注意事项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E6%9D%A1%E4%BB%B6-HAVING"><span class="toc-number">5.2.</span> <span class="toc-text">指定条件 HAVING</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F-ORDER-BY"><span class="toc-number">5.3.</span> <span class="toc-text">排序 ORDER BY</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%9B%B4%E6%96%B0"><span class="toc-number">6.</span> <span class="toc-text">数据库的更新</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5-INSERT"><span class="toc-number">6.1.</span> <span class="toc-text">插入 INSERT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4-DELETE"><span class="toc-number">6.2.</span> <span class="toc-text">删除 DELETE</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%9E%8B-DELETE"><span class="toc-number">6.2.1.</span> <span class="toc-text">搜索型 DELETE</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0-UPDATE"><span class="toc-number">6.3.</span> <span class="toc-text">更新 UPDATE</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%9E%8B-UPDATE"><span class="toc-number">6.3.1.</span> <span class="toc-text">搜索型 UPDATE</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">6.4.</span> <span class="toc-text">事务</span></a></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="https://mskclover.com/2022/10/18/SQL-learning-note-02/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="叶子"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="叶子的花园"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">SQL 学习笔记【02】</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <span class="post-meta-icon-text">发表于</span> <time title="创建时间：2022-10-18 15:09:34" itemprop="dateCreated datePublished" datetime="2022-10-18T15:09:34+08:00">2022-10-18</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <span class="post-meta-icon-text">更新于</span> <time title="修改时间：2023-03-20 13:03:28" itemprop="dateModified" datetime="2023-03-20T13:03:28+08:00">2023-03-20</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="本文字数"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="本文字数">4.8k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读时长"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="阅读时长">18m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E5%8F%B6%E5%AD%90%E7%9A%84%E5%B0%8F%E7%9F%A5%E8%AF%86/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">叶子的小知识</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/%E5%8D%9A%E6%96%87/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">博文</span></a><a class="tag-item" href="/tags/%E7%9F%A5%E8%AF%86/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">知识</span></a><a class="tag-item" href="/tags/%E7%AC%94%E8%AE%B0/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">笔记</span></a><a class="tag-item" href="/tags/SQL/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">SQL</span></a><a class="tag-item" href="/tags/%E3%80%8ASQL%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%E3%80%8B/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">《SQL基础教程》</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><p><img src="/images/SQL-learning-note-02/sql02-cover.jpg" width="650" alt="cover" / loading="lazy"><em>题图还是来自于网络</em></p>
<p>紧接「<a href="https://mskclover.com/2022/10/02/SQL-learning-note-01/">上篇</a>」，我认为虽然在 SQL 语句方面已经入门、有开箱即用的水平了，但对数据库相关知识的理解还是半瓶水的状态，所以我找了一本日本人 MICK 写的<a target="_blank" rel="noopener" href="https://book.douban.com/subject/27055712/"><strong>《SQL 基础教程》</strong></a>，想作进一步的学习。本书中所有的例程均以 ISO 制定的标准语法 SQL:2011 展现，虽然这最初出版于 2011 年，已经有些老了，但入门嘛，老一点也没关系，先学好基础，再徐徐图之。</p>
<span id="more"></span>

<p>另外，在豆瓣的界面下，我看到有评论推荐了一个练习平台 <a target="_blank" rel="noopener" href="http://sqlzoo.net/wiki/SELECT_basics/zh">sqlzoo</a>。我凭借脑子里新鲜的数据库知识看了一下，感觉是十分合适的，正好能为我补上更多的「习题」部分。</p>
<p>那就让我们开始新的学习吧。</p>
<h2 id="SQL-中的常数"><a href="#SQL-中的常数" class="headerlink" title="SQL 中的常数"></a>SQL 中的常数</h2><p>SQL 语句中出现的常数一般是三种：<strong>字符串</strong>、<strong>数字</strong>和<strong>日期</strong>。其中字符串和日期均需要用<strong>单引号</strong>括起来，而数字可以直接书写，如：<code>&#39;abc&#39;</code>、<code>&#39;2022-10-18&#39;</code> 和 <code>123</code>。</p>
<h2 id="表格创建、删除与更新"><a href="#表格创建、删除与更新" class="headerlink" title="表格创建、删除与更新"></a>表格创建、删除与更新</h2><p>根据书上的例子，我们以这张表为后续的 SQL 语句示例：</p>
<p><img src="/images/SQL-learning-note-02/sql02-01-01.jpg" alt="sql02-01" loading="lazy"></p>
<h3 id="创建数据库-CREAT-DATABASE"><a href="#创建数据库-CREAT-DATABASE" class="headerlink" title="创建数据库 CREAT DATABASE"></a>创建数据库 CREAT DATABASE</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 创建一张名为 shop 的数据库</span>

CREAT <span class="token keyword">DATABASE</span> shop<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="创建表-CREAT-TABLE"><a href="#创建表-CREAT-TABLE" class="headerlink" title="创建表 CREAT TABLE"></a>创建表 CREAT TABLE</h3><p>表的创建语法如下，我个人认为它更像是一种函数：</p>
<p><img src="/images/SQL-learning-note-02/sql02-01-02.jpg" alt="sql02-02" loading="lazy"></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">CREAT <span class="token keyword">TABLE</span> Product
<span class="token punctuation">(</span>
  product_id        <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>         <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>   <span class="token comment">-- CHAR 定长字符类型</span>
  product_name      <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>    <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>   <span class="token comment">-- VARCHAR 可变长度类型</span>
  product_type      <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>   <span class="token comment">-- NULL 约束关键字</span>
  sale_price        <span class="token keyword">INTEGER</span>         <span class="token punctuation">,</span>           <span class="token comment">-- INTEGER 整数类型，不能有小数</span>
 	purchase_price    <span class="token keyword">INTEGER</span>         <span class="token punctuation">,</span>
  regist_date       <span class="token keyword">DATE</span>            <span class="token punctuation">,</span>           <span class="token comment">-- DATE 日期类型</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>product_id<span class="token punctuation">)</span>                      <span class="token comment">-- 主键</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>其中：<code>NULL</code> 是约束的关键字，<code>NOT NULL</code> 约束了以上三列的单元格必须填写，不能置空。最后一行的语句 <code>PRIMARY KEY()</code> 的参数是设置表的<strong>主键约束</strong>：</p>
<p><strong>键：</strong>指定特定数据时的列集合；<br><strong>主键：</strong>可以特定一行数据的列（即通过该列，任意行均能被唯一确定）。</p>
<h3 id="删除表-DROP-TABLE"><a href="#删除表-DROP-TABLE" class="headerlink" title="删除表 DROP TABLE"></a>删除表 DROP TABLE</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 删除名为 Product 的表</span>

<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> Product<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p><strong>注意：</strong>删除的表是<strong>无法恢复</strong>的，只能重新创建新表，所以执行该操作之前<strong>务必小心</strong>。</p>
<h3 id="更新表的定义-ALTER-TABLE"><a href="#更新表的定义-ALTER-TABLE" class="headerlink" title="更新表的定义 ALTER TABLE"></a>更新表的定义 ALTER TABLE</h3><p>为表添加某列时，可使用该语句：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span> <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> <span class="token operator">&lt;</span>列名<span class="token operator">></span>
<span class="token comment">-- 注：不同的 SQL 语法可能会有不同的表述，在这里我们只关注 SQL:2011 与 MySQL</span>

<span class="token comment">-- 例如：添加一列表示商品的拼音，存储 100 位的可变字符串</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> Product <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> Product_name_pinyin <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>而删除表中的某列类似，改 <code>ADD</code> 为 <code>DROP</code> 即可：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span> <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> <span class="token operator">&lt;</span>列名<span class="token operator">></span>

<span class="token comment">-- 例如：删去拼音名的列</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> Product <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> Product_name_pinyin<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>与 <code>DROP TABLE</code> 同理，列在删除后也无法恢复。</p>
<h3 id="插入数据-INSERT-INTO"><a href="#插入数据-INSERT-INTO" class="headerlink" title="插入数据 INSERT INTO"></a>插入数据 INSERT INTO</h3><p>在上一篇的学习笔记中，我们学到过 <code>INSERT INTO () VALUES ()</code>，现在可以尝试一次性插入整张表：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># DML：插入数据</span>
<span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Product <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'0001'</span><span class="token punctuation">,</span> <span class="token string">'T恤衫'</span><span class="token punctuation">,</span> <span class="token string">'衣服'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span>  <span class="token string">'2009-09-20'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Product <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'0002'</span><span class="token punctuation">,</span> <span class="token string">'打孔器'</span><span class="token punctuation">,</span> <span class="token string">'办公用品'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">320</span><span class="token punctuation">,</span> <span class="token string">'2009-09-11'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Product <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'0003'</span><span class="token punctuation">,</span> <span class="token string">'运动T恤'</span><span class="token punctuation">,</span> <span class="token string">'衣服'</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">,</span> <span class="token number">2800</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Product <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'0004'</span><span class="token punctuation">,</span> <span class="token string">'菜刀'</span><span class="token punctuation">,</span> <span class="token string">'厨房用具'</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token number">2800</span><span class="token punctuation">,</span> <span class="token string">'2009-09-20'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Product <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'0005'</span><span class="token punctuation">,</span> <span class="token string">'高压锅'</span><span class="token punctuation">,</span> <span class="token string">'厨房用具'</span><span class="token punctuation">,</span> <span class="token number">6800</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">,</span> <span class="token string">'2009-01-15'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Product <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'0006'</span><span class="token punctuation">,</span> <span class="token string">'叉子'</span><span class="token punctuation">,</span> <span class="token string">'厨房用具'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span>  <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'2009-09-20'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Product <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'0007'</span><span class="token punctuation">,</span> <span class="token string">'擦菜板'</span><span class="token punctuation">,</span> <span class="token string">'厨房用具'</span><span class="token punctuation">,</span> <span class="token number">880</span><span class="token punctuation">,</span> <span class="token number">790</span><span class="token punctuation">,</span> <span class="token string">'2008-04-28'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Product <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'0008'</span><span class="token punctuation">,</span> <span class="token string">'圆珠笔'</span><span class="token punctuation">,</span> <span class="token string">'办公用品'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token string">'2009-11-11'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>			<span class="token comment">-- COMMIT 为确定插入行的指令语句 </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="数据库的基本查询"><a href="#数据库的基本查询" class="headerlink" title="数据库的基本查询"></a>数据库的基本查询</h2><p>本节的内容是 <code>SELECT</code> 语句及算数、比较和逻辑运算符的基本使用方法。</p>
<h3 id="查询列-SELECT"><a href="#查询列-SELECT" class="headerlink" title="查询列 SELECT"></a>查询列 SELECT</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 基本查询</span>
<span class="token keyword">SELECT</span> <span class="token operator">&lt;</span>列名<span class="token operator">></span>，…… 
　<span class="token keyword">FROM</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span>；

<span class="token comment">-- 如：输出三列</span>
<span class="token keyword">SELECT</span> product_id<span class="token punctuation">,</span> product_name<span class="token punctuation">,</span> purchase_price 
  <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>SELECT</code> 语句后<strong>可跟多列</strong>，其间用逗号分隔。</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 查询所有列</span>
<span class="token keyword">SELECT</span>　<span class="token operator">*</span>
  <span class="token keyword">FROM</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>其中星号「*」代表全部列、全选的意思。</p>
<h4 id="别名关键字-AS"><a href="#别名关键字-AS" class="headerlink" title="别名关键字 AS"></a>别名关键字 AS</h4><p>在 SQL 语句中可使用 <code>AS</code> 为列设置<strong>别名</strong>：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 在各列名后使用 AS</span>
<span class="token keyword">SELECT</span> product_id    		<span class="token keyword">AS</span> id<span class="token punctuation">,</span> 
       product_name   	<span class="token keyword">AS</span> name<span class="token punctuation">,</span> 
       purchase_price 	<span class="token keyword">AS</span> price 
  <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这样输出结果的时候就会用别名显示了。<strong>注意：</strong>当字符作为别名的时候，需要使用双引号括起来，这一点需要与前面的字符串常数相区别。</p>
<h4 id="查询常数"><a href="#查询常数" class="headerlink" title="查询常数"></a>查询常数</h4><p>这是一种查询表中特定常数的方法：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 输入：</span>
<span class="token keyword">SELECT</span> <span class="token string">'商品'</span> <span class="token keyword">AS</span> string<span class="token punctuation">,</span> <span class="token number">38</span> <span class="token keyword">AS</span> number<span class="token punctuation">,</span> <span class="token string">'2009-02-24'</span> <span class="token keyword">AS</span> <span class="token keyword">date</span><span class="token punctuation">,</span> 
       product_id<span class="token punctuation">,</span> product_name
  <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>输出如下：</p>
<p><img src="/images/SQL-learning-note-02/sql02-02-01.jpg" alt="sql02-03" loading="lazy"></p>
<h4 id="去重关键字-DISTINCT"><a href="#去重关键字-DISTINCT" class="headerlink" title="去重关键字 DISTINCT"></a>去重关键字 DISTINCT</h4><p>想要在输出的时候不显示重复行，可加入 <code>DISTINCT</code> 实现：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 单列：</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> product_type
  <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span>

<span class="token comment">-- 多列：</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> product_type<span class="token punctuation">,</span> regist_date 
  <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>注意：</strong>NULL 也会被视为一类数据；<code>DISTINCT</code> 关键字只能位于第一个列名之前。</p>
<h4 id="条件关键字-WHERE"><a href="#条件关键字-WHERE" class="headerlink" title="条件关键字 WHERE"></a>条件关键字 WHERE</h4><p>可以使用 <code>WHERE</code> 关键字限定输出数据的条件：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">&lt;</span>列名<span class="token operator">></span><span class="token punctuation">,</span> …… 
  <span class="token keyword">FROM</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span>
 <span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>条件表达式<span class="token operator">></span><span class="token punctuation">;</span>
 
 <span class="token comment">-- 如：</span>
<span class="token keyword">SELECT</span> product_name<span class="token punctuation">,</span> product_type 
  <span class="token keyword">FROM</span> Product
 <span class="token keyword">WHERE</span> product_type <span class="token operator">=</span> <span class="token string">'衣服'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>关键字的执行顺序是先找到 <code>WHERE</code> 语句限定的行，再输出 <code>SELECT</code> 语句选定的列：</p>
<p><img src="/images/SQL-learning-note-02/sql02-02-02.jpg" alt="sql02-04" loading="lazy"></p>
<h3 id="算数运算符"><a href="#算数运算符" class="headerlink" title="算数运算符"></a>算数运算符</h3><p>即加减乘除，括号会改变算式的优先级。</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">/*
加法：+
减法：-
乘法：*
除法：/
*/</span>

<span class="token comment">-- SQL 语句中可以使用运算表达式，例如：</span>
<span class="token keyword">SELECT</span> product_name<span class="token punctuation">,</span> sale_price<span class="token punctuation">,</span> 
       sale_price <span class="token operator">*</span> <span class="token number">2</span> <span class="token keyword">AS</span> <span class="token string">"sale_price_x2"</span> 
  <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>注意：</strong>所有包含 NULL 的运算，其结果均为 NULL。</p>
<h3 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">/*
等于：=
不等于：&lt;>			注意：此处是标准 SQL，有些数据库亦支持 !=；
大于：>
大于等于：>=
小于：&lt;
小于等于：&lt;=
*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>可以对日期常数使用比较运算符：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 选取日期再 2009-09-27 之前的记录：</span>
<span class="token keyword">SELECT</span> product_name<span class="token punctuation">,</span> product_type<span class="token punctuation">,</span> regist_date 
  <span class="token keyword">FROM</span> Product
 <span class="token keyword">WHERE</span> regist_date <span class="token operator">&lt;</span> <span class="token string">'2009-09-27'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>注意：</strong>对字符串使用不等号时，是依据<strong>字典顺序</strong>进行比较。（<code>2</code> 与 <code>&#39;2&#39;</code> 不一样，区分数字与字符串）</p>
<h4 id="判断-NULL"><a href="#判断-NULL" class="headerlink" title="判断 NULL"></a>判断 NULL</h4><p>希望以 NULL 元素选取记录时，应当用 <strong><code>IS NULL</code></strong> 或者 <strong><code>IS NOT NULL</code></strong> 运算符。</p>
<p><strong>注意：</strong>不能对 NULL 使用比较运算符。</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 错误示例：</span>
<span class="token keyword">SELECT</span> product_name<span class="token punctuation">,</span> purchase_price 
  <span class="token keyword">FROM</span> Product
 <span class="token keyword">WHERE</span> purchase_price <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

<span class="token comment">-- 正确示例：</span>
<span class="token keyword">SELECT</span> product_name<span class="token punctuation">,</span> purchase_price 
  <span class="token keyword">FROM</span> Product
 <span class="token keyword">WHERE</span> purchase_price <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">/*
非：NOT
与：AND
或：OR
*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>比较运算符与逻辑运算符均会<strong>返回真值</strong>。</p>
<p><strong>注意：</strong>AND 运算符的优先级高于 OR 运算符。</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 例如，需要找办公用品，且日期在 11 号或者 20 号的记录：</span>

<span class="token keyword">SELECT</span> product_name<span class="token punctuation">,</span> product_type<span class="token punctuation">,</span> regist_date 
  <span class="token keyword">FROM</span> Product
 <span class="token keyword">WHERE</span> product_type <span class="token operator">=</span> <span class="token string">'办公用品'</span> 
   <span class="token operator">AND</span> regist_date <span class="token operator">=</span> <span class="token string">'2009-09-11'</span> 
    <span class="token operator">OR</span> regist_date <span class="token operator">=</span> <span class="token string">'2009-09-20'</span><span class="token punctuation">;</span>
<span class="token comment">-- 是不对的，这样的逻辑是先找「既是办公用品，又在 11 号」的记录，</span>
<span class="token comment">-- 然后加上了所有「在 20 号」的记录</span>
<span class="token comment">-- 也就是被解释为了：</span>
<span class="token comment">-- (product_type = '办公用品' AND regist_date = '2009-09-11') </span>
<span class="token comment">-- OR</span>
<span class="token comment">-- (regist_date = '2009-09-20')</span>

<span class="token comment">-- 所以现在应该用括号人为地限定优先级：</span>
<span class="token keyword">SELECT</span> product_name<span class="token punctuation">,</span> product_type<span class="token punctuation">,</span> regist_date 
  <span class="token keyword">FROM</span> Product
 <span class="token keyword">WHERE</span> product_type <span class="token operator">=</span> <span class="token string">'办公用品'</span>
   <span class="token operator">AND</span> <span class="token punctuation">(</span>   regist_date <span class="token operator">=</span> <span class="token string">'2009-09-11'</span> 
        <span class="token operator">OR</span> regist_date <span class="token operator">=</span> <span class="token string">'2009-09-20'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="三值逻辑（NULL-的真值）"><a href="#三值逻辑（NULL-的真值）" class="headerlink" title="三值逻辑（NULL 的真值）"></a>三值逻辑（NULL 的真值）</h4><p>SQL 语句中的真值有三种：TRUE、FALSE 和 UNKNOWN。当有 NULL 参与逻辑运算时，可能会出现 UNKNOWN。其真值表如下：</p>
<p><img src="/images/SQL-learning-note-02/sql02-02-03.jpg" alt="sql02-02-03" loading="lazy"></p>
<p>由于考虑 NULL 后，最初只有四行的真值表变成了现在的九行，所以在数据库中<strong>应该尽量不使用 NULL</strong>。</p>
<h2 id="数据库的聚合查询"><a href="#数据库的聚合查询" class="headerlink" title="数据库的聚合查询"></a>数据库的聚合查询</h2><p><strong>聚合：</strong>将多行汇聚为一行。</p>
<p>SQL 语句中有 5 个常用的函数：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">COUNT：计算表中的记录数（行数） 
SUM：  计算表中数 值列中数据的合计值 
AVG：  计算表中数 值列中数据的平均值 
MAX：  求出表中任意列中数据的最大值 
MIN：  求出表中任意列中数据的最小值<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="总数-COUNT"><a href="#总数-COUNT" class="headerlink" title="总数 COUNT"></a>总数 COUNT</h3><p><code>COUNT</code> 函数能计算所有的数据行数，分两种情况：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 包括 NULL 数据的行数</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 
  <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span>

<span class="token comment">-- 不包括 NULL 数据的行数</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>列名<span class="token operator">></span><span class="token punctuation">)</span> 
  <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>注意：</strong>只有 <code>COUNT</code> 函数中的参数可以为星号「*」，其他函数都不可以。</p>
<h3 id="求和-SUM"><a href="#求和-SUM" class="headerlink" title="求和 SUM"></a>求和 SUM</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>列名<span class="token operator">></span><span class="token punctuation">)</span> 
  <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><strong>注意：</strong>如果该列的单元格中含有 NULL，<strong>聚合函数会将 NULL 排除在外</strong>（不参与计算过程），但 <code>COUNT(*)</code> 是例外。</p>
<h3 id="均值-AVG"><a href="#均值-AVG" class="headerlink" title="均值 AVG"></a>均值 AVG</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>列名<span class="token operator">></span><span class="token punctuation">)</span> 
  <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>例如计算含有 NULL 列的平均值时，由于 NULL 被排除在计算过程之外，所以其总数是减去了 NULL 项后，再参与的计算。</p>
<h3 id="最大-MAX-与最小-MIN"><a href="#最大-MAX-与最小-MIN" class="headerlink" title="最大 MAX 与最小 MIN"></a>最大 MAX 与最小 MIN</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>列名<span class="token operator">></span><span class="token punctuation">)</span>
  <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>列名<span class="token operator">></span><span class="token punctuation">)</span> 
  <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span>

<span class="token comment">-- 亦可计算日期的最大值、最小值：</span>
<span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>regist_date<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MIN</span><span class="token punctuation">(</span>regist_date<span class="token punctuation">)</span> 
  <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>注意：</strong><code>MAX</code>&#x2F;<code>MIN</code> 函数几乎适用于所有数据类型的列。<code>SUM</code>&#x2F;<code>AVG</code> 函数只适用于数值类型的列。</p>
<h3 id="去重-DISTINCT"><a href="#去重-DISTINCT" class="headerlink" title="去重 DISTINCT"></a>去重 DISTINCT</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> <span class="token operator">&lt;</span>列名<span class="token operator">></span><span class="token punctuation">)</span> 
  <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><strong>这时 DISTINCT 必须写在括号中</strong>，因为这里有一个逻辑问题：现在是先删去重复的数据，再计算数据的行数；如果像之前一般，写在括号之外，那么就会先计算数据的行数，再删去重复的数据，结果仍为所有数据的行数。</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 正确示例</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> product_type<span class="token punctuation">)</span> 
  <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span>
<span class="token comment">-- 此时返回的结果为 3</span>

<span class="token comment">-- 错误示例</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>product_type<span class="token punctuation">)</span> 
  <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span>
<span class="token comment">-- 此时返回的结果为 8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="数据库的分组"><a href="#数据库的分组" class="headerlink" title="数据库的分组"></a>数据库的分组</h2><p>聚合语句将表聚合为了一行，而使用 <code>GROUP BY</code> 分组语句，可以将表像切蛋糕那样分隔。</p>
<h3 id="分组-GRUOP-BY"><a href="#分组-GRUOP-BY" class="headerlink" title="分组 GRUOP BY"></a>分组 GRUOP BY</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">&lt;</span>列名<span class="token number">1</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>列名<span class="token number">2</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>列名<span class="token number">3</span><span class="token operator">></span><span class="token punctuation">,</span> …… 
  <span class="token keyword">FROM</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span>
 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>列名<span class="token number">1</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>列名<span class="token number">2</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>列名<span class="token number">3</span><span class="token operator">></span><span class="token punctuation">,</span> ……<span class="token punctuation">;</span>
 
 <span class="token comment">-- 例如，按照商品的种类统计行数：</span>
 <span class="token keyword">SELECT</span> product_type<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 
  <span class="token keyword">FROM</span> Product
 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> product_type<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在 <code>GROUP BY</code> 子句中指定的列被称为<strong>聚合键</strong>。当聚合键中包含 NULL 时，在结果中会以「不确定」行（空行）的形式表现出来。</p>
<p>当使用聚合函数时，<code>SELECT</code> 子句中只能存在三种元素：<strong>常数</strong>、<strong>聚合函数</strong>和<strong>聚合键</strong>。</p>
<p>当  <code>GROUP BY</code> 与 <code>WHERE</code> 语句并用时，SQL 语句逻辑的执行顺序为：<code>FROM</code> → <code>WHERE</code> → <code>GROUP BY</code> → <code>SELECT</code>。</p>
<h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><ol>
<li>使用 <code>GROUP BY</code> 子句时，<code>SELECT</code> 子句中不能出现聚合键之外的列名；</li>
<li>在 <code>GROUP BY</code> 子句中不能使用 <code>SELECT</code> 子句中定义的别名（因为语句逻辑顺序）；</li>
<li><code>GROUP BY</code> 并不参与对结果的排序，其显示的结果是随机的、无序的；</li>
<li>只有 <code>SELECT</code> 子句和 <code>HAVING</code> 子句（以及 <code>ORDER BY</code> 子句）中能够使用聚合函数。</li>
</ol>
<h3 id="指定条件-HAVING"><a href="#指定条件-HAVING" class="headerlink" title="指定条件 HAVING"></a>指定条件 HAVING</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">&lt;</span>列名<span class="token number">1</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>列名 <span class="token number">2</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>列名 <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">,</span> …… 
  <span class="token keyword">FROM</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span>
 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>列名<span class="token number">1</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>列名<span class="token number">2</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>列名<span class="token number">3</span><span class="token operator">></span><span class="token punctuation">,</span> …… 
<span class="token keyword">HAVING</span> <span class="token operator">&lt;</span>分组结果对应的条件<span class="token operator">></span>

<span class="token comment">-- 示例1:</span>
<span class="token keyword">SELECT</span> product_type<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 
  <span class="token keyword">FROM</span> Product
 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> product_type 
<span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">-- 示例2:</span>
<span class="token keyword">SELECT</span> product_type<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>sale_price<span class="token punctuation">)</span> 
  <span class="token keyword">FROM</span> Product
 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> product_type
<span class="token keyword">HAVING</span> <span class="token function">AVG</span><span class="token punctuation">(</span>sale_price<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">2500</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>在使用 <code>COUNT</code> 函数等对表中数据进行汇总操作时，为其指定条件的不是 <code>WHERE</code> 子句，而是 <code>HAVING</code> 子句。<code>WHERE</code> 子句只能指定记录（行）的条件，而不能用来指定组的条件。</li>
<li>聚合函数可以在 <code>SELECT</code> 子句、<code>HAVING</code> 子句和 <code>ORDER BY</code> 子句中使用。</li>
<li><code>HAVING</code> 子句要写在 <code>GROUP BY</code> 子句之后。</li>
<li><code>WHERE</code> 子句用来指定数据行的条件，<code>HAVING</code> 子句用来指定分组的条件。</li>
</ul>
<p>同理，<code>HAVING</code> 语句中也只能使用三种要素：<strong>常数</strong>、<strong>聚合函数</strong>和<strong>聚合键。</strong></p>
<h3 id="排序-ORDER-BY"><a href="#排序-ORDER-BY" class="headerlink" title="排序 ORDER BY"></a>排序 ORDER BY</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">&lt;</span>列名<span class="token number">1</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>列名<span class="token number">2</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>列名<span class="token number">3</span><span class="token operator">></span><span class="token punctuation">,</span> …… 
  <span class="token keyword">FROM</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span>
 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>排序基准列<span class="token number">1</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>排序基准列<span class="token number">2</span><span class="token operator">></span><span class="token punctuation">,</span> ……<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>ORDER BY</code> 子句中的列名称为<strong>排序键</strong>；</li>
<li>在 <code>ORDER BY</code> 子句中列名的后面使用关键字 <code>ASC</code> 可以进行升序排序（默认，可不写），使用 <code>DESC</code> 关键字可以进行降序排序；</li>
<li>在 <code>ORDER BY</code> 子句中可以指定多个排序键；</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 当第一个排序键的结果中出现相同值时，将根据右侧的排序键进行排序：</span>
<span class="token keyword">SELECT</span> product_id<span class="token punctuation">,</span> product_name<span class="token punctuation">,</span> sale_price<span class="token punctuation">,</span> purchase_price 
  <span class="token keyword">FROM</span> Product
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sale_price<span class="token punctuation">,</span> product_id<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>当排序健中包含 NULL 时，会在开头或末尾进行汇总；</li>
<li>在 <code>ORDER BY</code> 子句中可以使用 <code>SELECT</code> 子句中定义的列的别名；</li>
</ul>
<p>因为此时的<strong>语句逻辑顺序</strong>为：<code>FROM</code> → <code> WHERE</code> → <code>GROUP BY</code> →  <code>HAVING</code> → <code>SELECT</code> →  <code>ORDER BY</code>。</p>
<ul>
<li>在 <code>ORDER BY</code> 子句中可以使用 <code>SELECT</code> 子句中未使用的列和聚合函数;</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> product_id <span class="token keyword">AS</span> id<span class="token punctuation">,</span> 
			 product_name<span class="token punctuation">,</span> 
			 sale_price <span class="token keyword">AS</span> sp<span class="token punctuation">,</span> 
			 purchase_price
  <span class="token keyword">FROM</span> Product 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sp<span class="token punctuation">,</span> id<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>在 <code>ORDER BY</code> 子句中不要使用列编号。</li>
</ul>
<p>最后，以上语句的书写顺序为：<code>1. SELECT 子句</code> → <code>2. FROM 子句</code> → <code>3. WHERE 子句</code> → <code>4. GROUP BY 子句</code> → <code>5. HAVING 子句</code> → <code>6. ORDER BY 子句</code>。</p>
<h2 id="数据库的更新"><a href="#数据库的更新" class="headerlink" title="数据库的更新"></a>数据库的更新</h2><p>数据库的更新包括 <code>INSERT</code>、<code>DELETE</code> 和 <code>UPDATE</code> 三种修改表的指令，和进行相关操作的事务。</p>
<h3 id="插入-INSERT"><a href="#插入-INSERT" class="headerlink" title="插入 INSERT"></a>插入 INSERT</h3><p>首先创建一个名为 <code>productIns</code> 的表作为示例，其中除了 <code>sale_price</code> 列设置了 <code>DEFAULT 0</code> 的约束外，其余内容与之前的 <code>product</code> 表完全相同。</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 创建 ProductIns 表</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> ProductIns
<span class="token punctuation">(</span>
  product_id      <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>      <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> 
 	product_name    <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> 
 	product_type    <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> 
 	sale_price      <span class="token keyword">INTEGER</span>      <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span> 
 	purchase_price  <span class="token keyword">INTEGER</span>     <span class="token punctuation">,</span>
 	regist_date     <span class="token keyword">DATE</span>        <span class="token punctuation">,</span> 
 	<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>product_id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>使用 <code>INSERT</code> 语句可以向表中插入数据（行）。原则上，<code>INSERT</code> 语句每次执行一行数据的插入。</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- INSERT 语句定义：</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span> <span class="token punctuation">(</span>列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> 列<span class="token number">3</span><span class="token punctuation">,</span> ……<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span> 值<span class="token number">2</span><span class="token punctuation">,</span> 值<span class="token number">3</span><span class="token punctuation">,</span> ……<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入一条数据的示例：</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> ProductIns <span class="token punctuation">(</span>product_id<span class="token punctuation">,</span> product_name<span class="token punctuation">,</span> product_type<span class="token punctuation">,</span> sale_price<span class="token punctuation">,</span> purchase_price<span class="token punctuation">,</span> regist_date<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'0001'</span><span class="token punctuation">,</span> <span class="token string">'T恤衫'</span><span class="token punctuation">,</span> <span class="token string">'衣服'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token string">'2009-09-20'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><p>将列名和值用逗号隔开，分别括在（半角）括号()内，这种形式称为清单。</p>
</li>
<li><p>对表中所有列进行 <code>INSERT</code> 操作时可以省略表名后的列清单。</p>
</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 对表进行全列 INSERT 时，可以省略表名后的列清单</span>
<span class="token comment">-- 以下示例效果同上：</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> ProductIns <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'0001'</span><span class="token punctuation">,</span> <span class="token string">'T恤衫'</span><span class="token punctuation">,</span> <span class="token string">'衣服'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token string">'2009-09-20'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>插入 NULL 时需要在 <code>VALUES</code> 子句的值清单中写入 NULL。</li>
<li>可以为表中的列设定默认值（初始值），默认值可以通过在 <code>CREATE TABLE</code> 语句中为列设置 <code>DEFAULT</code> 约束来设定。</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 参照 ProductIns 表的创建，DEFAULT 约束设定默认值：</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> ProductIns
<span class="token punctuation">(</span>product_id      <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>      <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> 
 ……
 sale_price      <span class="token keyword">INTEGER</span>      <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span> 		<span class="token comment">-- 销售单价初始值默认为 0；</span>
 ……
 <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>product_id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>插入默认值可以通过两种方式实现，即在 <code>INSERT</code> 语句的 VALUES子句中指定 <code>DEFAULT</code> 关键字（显式方法），或省略列清单（隐式方法）。 （显式方法插入默认值最好）</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 显式方法插入默认值：</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> ProductIns <span class="token punctuation">(</span>product_id<span class="token punctuation">,</span> product_name<span class="token punctuation">,</span> product_type<span class="token punctuation">,</span> sale_price<span class="token punctuation">,</span> purchase_price<span class="token punctuation">,</span> regist_date<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'0007'</span><span class="token punctuation">,</span> <span class="token string">'擦菜板'</span><span class="token punctuation">,</span> <span class="token string">'厨房用具'</span><span class="token punctuation">,</span> <span class="token keyword">DEFAULT</span><span class="token punctuation">,</span> <span class="token number">790</span><span class="token punctuation">,</span> <span class="token string">'2009-04-28'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>使用 <code>INSERT…SELECT</code> 可以从其他表中复制数据。</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 创建一个空白示例表：</span>
<span class="token comment">-- 用来插入数据的商品复制表 </span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> ProductCopy
<span class="token punctuation">(</span>product_id  	  	<span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>      	<span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> 
 product_name   	<span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> 	<span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> 
 product_type 		<span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>  	<span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> 
 sale_price   		<span class="token keyword">INTEGER</span>      	<span class="token punctuation">,</span>
 purchase_price 	<span class="token keyword">INTEGER</span>      	<span class="token punctuation">,</span> 
 regist_date    	<span class="token keyword">DATE</span>         	<span class="token punctuation">,</span> 
 <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>product_id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">-- 将商品表中的数据复制到商品复制表中</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> ProductCopy <span class="token punctuation">(</span>product_id<span class="token punctuation">,</span> product_name<span class="token punctuation">,</span> product_type<span class="token punctuation">,</span> sale_price<span class="token punctuation">,</span> purchase_price<span class="token punctuation">,</span> regist_date<span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> product_id<span class="token punctuation">,</span> product_name<span class="token punctuation">,</span> product_type<span class="token punctuation">,</span> sale_price<span class="token punctuation">,</span> purchase_price<span class="token punctuation">,</span> regist_date
<span class="token keyword">FROM</span> Product<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>现在 <code>ProductCopy</code> 中插入了与 <code>ProductIns</code> 完全相同的八行数据，而原有的 <code>ProductIns</code> 表不会改变。</p>
<ul>
<li>在 <code>INSERT</code> 语句的 <code>SELECT</code> 语句中，可以使用 <code>WHERE</code> 子句或者 <code>GROUP BY</code> 子句等任何 SQL 语法（但使用 <code>ORDER BY</code> 子句并不会产生任何效果）。</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 根据商品种类进行汇总的表 ； </span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> ProductType
<span class="token punctuation">(</span>
  product_type      	<span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>    	<span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> 
 	sum_sale_price    	<span class="token keyword">INTEGER</span>       	<span class="token punctuation">,</span>
 	sum_purchase_price 	<span class="token keyword">INTEGER</span>        	<span class="token punctuation">,</span> 
 	<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>product_type<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入其他表中数据合计值的 INSERT…SELECT 语句：</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> ProductType <span class="token punctuation">(</span>product_type<span class="token punctuation">,</span> sum_sale_price<span class="token punctuation">,</span> sum_purchase_price<span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> product_type<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>sale_price<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>purchase_price<span class="token punctuation">)</span> 
  <span class="token keyword">FROM</span> Product
 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> product_type<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="删除-DELETE"><a href="#删除-DELETE" class="headerlink" title="删除 DELETE"></a>删除 DELETE</h3><ul>
<li>如果想将整个表全部删除，可以使用 <code>DROP TABLE</code> 语句，如果只想删除表中全部数据，需使用 <code>DELETE</code> 语句。</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 保留数据表，仅删除全部数据行的 DELETE 语句</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span><span class="token punctuation">;</span>

<span class="token comment">-- 例如：清空 Product 表</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> Product<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>注意：</strong>DELETE语句的删除对象并不是表或者列，而是记录（行）。</p>
<h4 id="搜索型-DELETE"><a href="#搜索型-DELETE" class="headerlink" title="搜索型 DELETE"></a>搜索型 DELETE</h4><ul>
<li>如果想删除部分数据行，只需在 <code>WHERE</code> 子句中书写对象数据的条件即可。通过 <code>WHERE</code> 子句指定删除对象的 <code>DELETE</code> 语句称为搜索型 <code>DELETE</code> 语句。</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 删除部分数据行的搜索型 DELETE</span>

<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span> 
 <span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>条件<span class="token operator">></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>注意：</strong>与 <code>SELECT</code> 语句不同的是，<code>DELETE</code> 语句中不能使用 <code>GROUP BY</code>、<code>HAVING</code> 和 <code>ORDER BY</code> 三类子句，而只能使用 <code>WHERE</code> 子句 。</p>
<h3 id="更新-UPDATE"><a href="#更新-UPDATE" class="headerlink" title="更新 UPDATE"></a>更新 UPDATE</h3><ul>
<li>使用 UPDATE语句可以更改（更新）表中的数据。</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 改变表中数据的 UPDATE 语句</span>

<span class="token keyword">UPDATE</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span>
   <span class="token keyword">SET</span> <span class="token operator">&lt;</span>列名<span class="token operator">></span> <span class="token operator">=</span> <span class="token operator">&lt;</span>表达式<span class="token operator">></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="搜索型-UPDATE"><a href="#搜索型-UPDATE" class="headerlink" title="搜索型 UPDATE"></a>搜索型 UPDATE</h4><ul>
<li>更新部分数据行时可以使用 <code>WHERE</code> 来指定更新对象的条件。通过 <code>WHERE</code> 子句指定更新对象的 <code>UPDATE</code> 语句称为搜索型 <code>UPDATE</code> 语句。</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 更新部分数据行的搜索型 UPDATE</span>
<span class="token keyword">UPDATE</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span>
   <span class="token keyword">SET</span> <span class="token operator">&lt;</span>列名<span class="token operator">></span> <span class="token operator">=</span> <span class="token operator">&lt;</span>表达式<span class="token operator">></span> 
 <span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>条件<span class="token operator">></span><span class="token punctuation">;</span>

<span class="token comment">-- 示例：将商品种类为厨房用具的记录的销售单价更新为原来的 10 倍</span>
<span class="token keyword">UPDATE</span> Product
   <span class="token keyword">SET</span> sale_price <span class="token operator">=</span> sale_price <span class="token operator">*</span> <span class="token number">10</span> 
 <span class="token keyword">WHERE</span> product_type <span class="token operator">=</span> <span class="token string">'厨房用具'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>UPDATE</code> 语句可以将列的值更新为 NULL。</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 将商品编号为 0008 的数据（圆珠笔）的登记日期更新为 NULL</span>

<span class="token keyword">UPDATE</span> Product
   <span class="token keyword">SET</span> regist_date <span class="token operator">=</span> <span class="token boolean">NULL</span> 
 <span class="token keyword">WHERE</span> product_id <span class="token operator">=</span> <span class="token string">'0008'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>注意：</strong>使用 UPDATE语句可以将值清空为 NULL（但只限于未设置 NOT NULL约束的列）。</p>
<ul>
<li>同时更新多列时，可以在 <code>UPDATE</code> 语句的 <code>SET</code> 子句中，使用逗号分隔更新对象的多个列。</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 繁琐的 UPDATE 语句</span>
<span class="token keyword">UPDATE</span> Product
   <span class="token keyword">SET</span> sale_price <span class="token operator">=</span> sale_price <span class="token operator">*</span> <span class="token number">10</span> 
 <span class="token keyword">WHERE</span> product_type <span class="token operator">=</span> <span class="token string">'厨房用具'</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> Product
   <span class="token keyword">SET</span> purchase_price <span class="token operator">=</span> purchase_price <span class="token operator">/</span> <span class="token number">2</span> 
 <span class="token keyword">WHERE</span> product_type <span class="token operator">=</span> <span class="token string">'厨房用具'</span><span class="token punctuation">;</span>

<span class="token comment">-- 合并为一条 UPDATE语句</span>
<span class="token comment">-- 使用逗号对列进行分隔排列 </span>
<span class="token keyword">UPDATE</span> Product
   <span class="token keyword">SET</span> sale_price <span class="token operator">=</span> sale_price <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span> 
       purchase_price <span class="token operator">=</span> purchase_price <span class="token operator">/</span> <span class="token number">2</span> 
 <span class="token keyword">WHERE</span> product_type <span class="token operator">=</span> <span class="token string">'厨房用具'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><p>这是一个全新的概念，我觉得蛮好理解的：</p>
<ul>
<li><strong>事务是需要在同一个处理单元中执行的一系列更新处理的集合。</strong><br>通过使用事务，可以对数据库中的数据更新处理的提交和取消进行管理。</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 将两条 SQL 语句在事务中执行：</span>

<span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span>
		
		<span class="token comment">-- 将运动T恤的销售单价降低1000日元 </span>
    <span class="token keyword">UPDATE</span> Product
       <span class="token keyword">SET</span> sale_price <span class="token operator">=</span> sale_price <span class="token operator">-</span> <span class="token number">1000</span> 
     <span class="token keyword">WHERE</span> product_name <span class="token operator">=</span> <span class="token string">'运动T恤'</span><span class="token punctuation">;</span>

    <span class="token comment">-- 将T恤衫的销售单价上浮1000日元 </span>
    <span class="token keyword">UPDATE</span> Product
       <span class="token keyword">SET</span> sale_price <span class="token operator">=</span> sale_price <span class="token operator">+</span> <span class="token number">1000</span> 
     <span class="token keyword">WHERE</span> product_name <span class="token operator">=</span> <span class="token string">'T恤衫'</span><span class="token punctuation">;</span>

<span class="token keyword">COMMIT</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>事务处理的终止指令包括 <code>COMMIT</code>（提交处理）和 <code>ROLLBACK</code>（取消处理）两种。</li>
</ul>
<p><img src="/images/SQL-learning-note-02/sql02-04-01.jpg" alt="sql02-04-01" loading="lazy"></p>
<p><strong>注意：</strong>特别是在执行 <code>DELETE</code> 语句的 <code>COMMIT</code> 时尤其要小心。</p>
<p><img src="/images/SQL-learning-note-02/sql02-04-02.jpg" alt="sql02-04-02" loading="lazy"></p>
<p>在这里，我引用一段作者对现代关系型数据库管理系统的描述：</p>
<blockquote>
<p>实际上，几乎所有的数据库产品的事务都无需开始指令。这是因为大部分情况下，事务在数据库连接建立时就已经悄悄开始了，并不需要用户再明确发出开始指令。例如，使用 Oracle 时，数据库连接建立之后，第一条 SQL 语句执行的同时，事务就已经悄悄开始了。</p>
<p>例如，PostgreSQL的用户手册中有如下记述 ：「PostgreSQL 中所有的SQL指令语句都在事务内执行。即使不执行 <code>BEGIN</code>，这些命令语句也会在执行时悄悄被括在 <code>BEGIN</code> 和 <code>COMMIT</code>（如果成功的话）之间。」（《PostgreSQL 9.5.2 文档》“3-4 节 事务”）</p>
</blockquote>
<ul>
<li>DBMS 的事务具有原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）和持久性（Durability）四种特性。通常将这四种特性的首字母结合起来，统称为 ACID 特性。</li>
</ul>
</div></section><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>叶子</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://mskclover.com/2022/10/18/SQL-learning-note-02/" title="SQL 学习笔记【02】">https://mskclover.com/2022/10/18/SQL-learning-note-02/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> 许可协议。</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2022/10/24/SQL-learning-note-03/" rel="prev" title="SQL 学习笔记【03】"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">SQL 学习笔记【03】</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2022/10/02/SQL-learning-note-01/" rel="next" title="SQL 学习笔记【01】"><span class="post-nav-text">SQL 学习笔记【01】</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>如果您有任何关于博客内容的相关讨论，欢迎前往 <a href="https://github.com/misaka-clover/misaka-clover.github.io/discussions" target="_blank">GitHub Discussions</a> 与我交流。</span><br></div><style>.utterances {
  max-width: 100%;
}</style><script src="https://giscus.app/client.js" data-repo="misaka-clover/misaka-clover.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkyODk0NzI1MzM=" data-category="Announcements" data-category-id="DIC_kwDOEUEAFc4CU_3i" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-theme="light" crossorigin="anonymous" async></script></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2020 – 2024 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> 叶子</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v7.2.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.10.11</span></div><div class="live-time"><span>本花园已长草</span><span id="display_live_time"></span><span class="moe-text">（¯﹃¯）</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2020-08-22T19:25:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = ` ${passDay} 天 ${passHour} 小时 ${passMinute} 分 ${passSecond} 秒`;
}
blog_live_time();
</script></div><div class="footer-custom-text">博客版本：Version.2.1.6 |  <a href="https://icp.gov.moe" target="_blank" style="color:inherit"><img src="/images/moeicp.png" width="25" style="vertical-align:middle">萌ICP备 </a><a href="https://icp.gov.moe/?keyword=20232952" target="_blank" style="color:inherit"> 20232952 号</a> </div><div class="footer-support"><span>由好人一生平安的</span><a class="footer-support-logo" href="https://www.cloudflare.com/" target="blank" title="Cloudflare"><img height="30" src="/images/CF_logo_stacked_blktype.svg" alt="Cloudflare"></a><span>提供免费的 CDN 加速</span></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" target="_blank" rel="noopener" href="https://www.google.com/search?q=site:mskclover.com" title="搜索"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:search-line"></span></span></a><script>function initMourn() {
  const date = new Date();
  const today = (date.getMonth() + 1) + "-" + date.getDate()
  const mourn_days = ["4-4","9-18","6-4"]
  if (mourn_days.includes(today)) {
    document.documentElement.style.filter = "grayscale(1)";
  }
}
initMourn();</script><script src="https://fastly.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script>const images = [...document.querySelectorAll('.markdown-body img')]
mediumZoom(images)</script><style>.medium-zoom-image {
  z-index: 99;
}</style></body></html>