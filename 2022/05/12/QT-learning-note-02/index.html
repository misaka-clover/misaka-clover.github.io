<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="叶子"><meta name="copyright" content="叶子"><meta name="generator" content="Hexo 7.2.0"><meta name="theme" content="hexo-theme-yun"><title>【QT 学习笔记02】第一个项目！ | 叶子的花园</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.4.1/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"mskclover.com","root":"/","title":"叶子的花园","version":"1.10.11","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"搜索...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"/data/sentences.json"},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]},"vendors":{"host":"https://fastly.jsdelivr.net/npm/","darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><link rel="alternate" href="/atom.xml" title="叶子的花园" type="application/atom+xml"><script src="/" async></script><script src="/j" async></script><script src="/a" async></script><script src="/v" async></script><script src="/a" async></script><script src="/s" async></script><script src="/c" async></script><script src="/r" async></script><script src="/i" async></script><script src="/p" async></script><script src="/t" async></script><script src="/" async></script><script src="/g" async></script><script src="/o" async></script><script src="/o" async></script><script src="/g" async></script><script src="/l" async></script><script src="/e" async></script><script src="/a" async></script><script src="/d" async></script><script src="/." async></script><script src="/j" async></script><script src="/s" async></script><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-6VWG03H880"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-6VWG03H880');
}</script><script data-ad-client="pub-4618904761682457" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><meta name="description" content="继续挖坑">
<meta property="og:type" content="article">
<meta property="og:title" content="【QT 学习笔记02】第一个项目！">
<meta property="og:url" content="https://mskclover.com/2022/05/12/QT-learning-note-02/index.html">
<meta property="og:site_name" content="叶子的花园">
<meta property="og:description" content="继续挖坑">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://mskclover.com/images/QT-learning-note-02/cover.jpg">
<meta property="og:image" content="https://mskclover.com/images/QT-learning-note-02/helloqtgui-program.jpg">
<meta property="og:image" content="https://mskclover.com/images/QT-learning-note-02/qwidget_1.jpg">
<meta property="og:image" content="https://mskclover.com/images/QT-learning-note-02/qwidget_2.jpg">
<meta property="og:image" content="https://mskclover.com/images/QT-learning-note-02/qwidget_3.jpg">
<meta property="og:image" content="https://mskclover.com/images/QT-learning-note-02/qwidget_4.jpg">
<meta property="og:image" content="https://mskclover.com/images/QT-learning-note-02/qwidget_5.jpg">
<meta property="og:image" content="https://mskclover.com/images/QT-learning-note-02/qwidget_6.jpg">
<meta property="og:image" content="https://mskclover.com/images/QT-learning-note-02/coordinate_1.jpg">
<meta property="og:image" content="https://mskclover.com/images/QT-learning-note-02/coordinate_2.jpg">
<meta property="og:image" content="https://mskclover.com/images/QT-learning-note-02/coordinate_3.jpg">
<meta property="article:published_time" content="2022-05-12T05:27:34.000Z">
<meta property="article:modified_time" content="2023-03-20T05:03:10.000Z">
<meta property="article:author" content="叶子">
<meta property="article:tag" content="博文">
<meta property="article:tag" content="笔记">
<meta property="article:tag" content="QT">
<meta property="article:tag" content="知识">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mskclover.com/images/QT-learning-note-02/cover.jpg"><script>(function() {
  if (CONFIG.mode !== 'auto') return
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="叶子"><img width="96" loading="lazy" src="/images/avatar/avatar.jpg" alt="叶子"><span class="site-author-status" title="今天也是美好的一天呢">🥬</span></a><div class="site-author-name"><a href="/about/">叶子</a></div><a class="site-name" href="/about/site.html">叶子的花园</a><sub class="site-subtitle">靡不有初，鲜克有终</sub><div class="site-description">@Misaka-Clover</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">57</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">8</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">138</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="留言板"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:clipboard-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><span class="icon iconify" data-icon="ri:rss-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/misaka-clover" title="GitHub" target="_blank" style="color:#181717"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/Misaka_Clover" title="Twitter" target="_blank" style="color:#1da1f2"><span class="icon iconify" data-icon="ri:twitter-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://g0v.social/@Misaka_Clover" title="Mastodon" target="_blank" style="color:purple"><span class="icon iconify" data-icon="ri:mastodon-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:cover@mskclover.com" title="E-Mail" target="_blank" style="color:#8E71C1"><span class="icon iconify" data-icon="ri:mail-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.travellings.cn/go.html" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><span class="icon iconify" data-icon="ri:train-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:genderless-line"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AA-Qt-%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.</span> <span class="toc-text">第一个 Qt 项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6%EF%BC%88-pro%EF%BC%89"><span class="toc-number">1.1.</span> <span class="toc-text">项目文件（.pro）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#main-cpp"><span class="toc-number">1.2.</span> <span class="toc-text">main.cpp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mainwindow-h"><span class="toc-number">1.3.</span> <span class="toc-text">mainwindow.h</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mainwindow-cpp"><span class="toc-number">1.4.</span> <span class="toc-text">mainwindow.cpp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mainwindow-ui"><span class="toc-number">1.5.</span> <span class="toc-text">mainwindow.ui</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Qt-%E7%9A%84%E7%AA%97%E5%8F%A3%E7%B1%BB"><span class="toc-number">2.</span> <span class="toc-text">Qt 的窗口类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E4%B8%AA%E5%9F%BA%E7%A1%80%E7%AA%97%E5%8F%A3%E7%B1%BB"><span class="toc-number">2.1.</span> <span class="toc-text">三个基础窗口类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AA%97%E5%8F%A3%E7%9A%84%E6%98%BE%E7%A4%BA"><span class="toc-number">2.2.</span> <span class="toc-text">窗口的显示</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E4%BD%93%E7%B3%BB"><span class="toc-number">3.</span> <span class="toc-text">坐标体系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">4.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">5.</span> <span class="toc-text">参考资料</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="https://mskclover.com/2022/05/12/QT-learning-note-02/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="叶子"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="叶子的花园"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">【QT 学习笔记02】第一个项目！</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <span class="post-meta-icon-text">发表于</span> <time title="创建时间：2022-05-12 13:27:34" itemprop="dateCreated datePublished" datetime="2022-05-12T13:27:34+08:00">2022-05-12</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <span class="post-meta-icon-text">更新于</span> <time title="修改时间：2023-03-20 13:03:10" itemprop="dateModified" datetime="2023-03-20T13:03:10+08:00">2023-03-20</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="本文字数"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="本文字数">3.3k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读时长"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="阅读时长">12m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E5%8F%B6%E5%AD%90%E7%9A%84%E5%B0%8F%E7%9F%A5%E8%AF%86/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">叶子的小知识</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/%E5%8D%9A%E6%96%87/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">博文</span></a><a class="tag-item" href="/tags/%E7%AC%94%E8%AE%B0/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">笔记</span></a><a class="tag-item" href="/tags/QT/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">QT</span></a><a class="tag-item" href="/tags/%E7%9F%A5%E8%AF%86/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">知识</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><img src="/images/QT-learning-note-02/cover.jpg" width="450" alt="cover" / loading="lazy">

<span id="more"></span>

<p>今天本来是想要参考<a href="https://mskclover.com/2022/04/26/QT-learning-note-01/">上一节</a>提到的教程，继续学习 Qt 的。但参考的那两个教程都太陈旧了，可能是因为新的环境变化太大，他们给出的例程我没办法在电脑上复现，所以只得作罢。而且我发现，中文网络上的教程文章几乎都是 18 年之前的，之后很少再有新的文章了。像我在一个 Qt 的中文论坛又找到的一份教程：<a target="_blank" rel="noopener" href="https://www.qter.org/forum.php?mod=viewthread&tid=193">《Qt 快速入门系列教程》</a>，作者之前还出版了这本书，已经到第三版了，并且在 2019 年 2 月的时候还对教程进行一定程度的更新，有重修教程、重振论坛的意思，但现在看起来，他最终还是没能成功：他的 Qt5 新教程在写了十篇以后，停止在了同年的 3 月 20 日，非常可惜。</p>
<p>所以，我只好另寻他路。我在搜索引擎中找到了<a target="_blank" rel="noopener" href="https://subingwen.cn/">这个博客</a>中的 Qt 教程，看起来他以前好像是一个机构等职业讲师，在 <a target="_blank" rel="noopener" href="https://space.bilibili.com/147020887">B站</a> 也有更新相关的视频。我粗略地看了一下，应该是能满足我们目前的学习需要了，所以这次就开始学习<a href="https://mskclover.com/2022/05/12/QT-learning-note-02/#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">这个教程</a>了。</p>
<h2 id="第一个-Qt-项目"><a href="#第一个-Qt-项目" class="headerlink" title="第一个 Qt 项目"></a>第一个 Qt 项目</h2><p>略去已经学习过的部分后，我们这次终于开始使用 IDE 来构建项目了：Qt 官方提供的 Qt Creater，其基本用法就不再多说了。<strong>这次以 <code>HelloQtGui</code> 这个项目作为第一个例程，目的是使初学者知晓项目中各个文件的关系</strong>，下面贴出项目的结构与相关代码吧：</p>
<p><img src="/images/QT-learning-note-02/helloqtgui-program.jpg" alt="helloqtgui-program" loading="lazy"><em>项目结构</em></p>
<h3 id="项目文件（-pro）"><a href="#项目文件（-pro）" class="headerlink" title="项目文件（.pro）"></a>项目文件（.pro）</h3><p>最上面的 <code>HelloQtGui.pro</code> 是项目文件，其中记录着项目的一些属性信息，在编译时系统会自动修改其中的内容，也可以手动改动其中的一些参数，以实现额外的功能，在<a href="https://mskclover.com/2022/04/26/QT-learning-note-03/">后面</a>会遇见相关的例子，这里就先贴出代码与注释：</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment"># HelloQtGui.pro</span>

<span class="token comment"># 在项目文件中, 注释需要使用 井号(#)</span>
<span class="token comment"># 项目编译的时候需要加载哪些底层模块</span>
<span class="token key attr-name">QT</span> <span class="token value attr-value">      += core gui</span>

<span class="token comment"># 如果当前Qt版本大于4, 会添加一个额外的模块: widgets</span>
<span class="token comment"># Qt5 中对 gui 模块进行了拆分, 将 widgets 独立出来了</span>
<span class="token key attr-name">greaterThan(QT_MAJOR_VERSION,</span> <span class="token value attr-value">4): QT += widgets</span>

<span class="token comment"># 使用 c++11 新特性</span>
<span class="token key attr-name">CONFIG</span> <span class="token value attr-value">+= c++11</span>

<span class="token comment"># The following define makes your compiler emit warnings if you use</span>
<span class="token comment"># any Qt feature that has been marked deprecated (the exact warnings</span>
<span class="token comment"># depend on your compiler). Please consult the documentation of the</span>
<span class="token comment"># deprecated API in order to know how to port your code away from it.</span>
<span class="token comment"># 如果在项目中调用了废弃的函数, 项目编译的时候会有警告的提示</span>
<span class="token key attr-name">DEFINES</span> <span class="token value attr-value">+= QT_DEPRECATED_WARNINGS</span>

<span class="token comment"># You can also make your code fail to compile if it uses deprecated APIs.</span>
<span class="token comment"># In order to do so, uncomment the following line.</span>
<span class="token comment"># You can also select to disable deprecated APIs only up to a certain version of Qt.</span>
<span class="token comment">#DEFINES += QT_DISABLE_DEPRECATED_BEFORE=0x060000    # disables all the APIs deprecated before Qt 6.0.0</span>

<span class="token comment"># 项目中的源文件</span>
<span class="token key attr-name">SOURCES</span> <span class="token value attr-value">+= \
    main.cpp \
    mainwindow.cpp \
    testdialog.cpp \
    testwidget.cpp</span>

<span class="token comment"># 项目中的头文件</span>
<span class="token key attr-name">HEADERS</span> <span class="token value attr-value">+= \
    mainwindow.h \
    testdialog.h \
    testwidget.h</span>

<span class="token comment"># 项目中的窗口界面文件</span>
<span class="token key attr-name">FORMS</span> <span class="token value attr-value">+= \
    mainwindow.ui \
    testdialog.ui \
    testwidget.ui</span>

<span class="token comment"># Default rules for deployment.</span>
<span class="token key attr-name">qnx</span><span class="token punctuation">:</span> <span class="token value attr-value">target.path = /tmp/$$&#123;TARGET&#125;/bin</span>
<span class="token key attr-name">else</span><span class="token punctuation">:</span> <span class="token value attr-value">unix:!android: target.path = /opt/$$&#123;TARGET&#125;/bin</span>
<span class="token comment">!isEmpty(target.path): INSTALLS += target</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="main-cpp"><a href="#main-cpp" class="headerlink" title="main.cpp"></a>main.cpp</h3><p>这里是程序的主函数，多是自动生成的代码：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// main.cpp</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"mainwindow.h"</span>     <span class="token comment">// 生成的窗口类头文件</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication></span>     <span class="token comment">// 应用程序类头文件</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 创建应用程序对象，在一个 Qt 项目中实例对象有且仅有一个</span>
                                        <span class="token comment">// 类的作用：检测触发的事件，进行事件的循环并处理</span>
                                        <span class="token comment">//定义一个 QT 应用程序对象，它是 QT 图像界面的入口</span>
                                        <span class="token comment">//它的构造函数接收与 main 函数一样的参数</span>
    MainWindow w<span class="token punctuation">;</span>       <span class="token comment">// 创建窗口类对象</span>
    w<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// 显示窗口</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// exec() 阻塞函数进入事件循环函数等待用户操作</span>
    					<span class="token comment">// 使在程序执行完以后，窗口不会自动消失</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="mainwindow-h"><a href="#mainwindow-h" class="headerlink" title="mainwindow.h"></a>mainwindow.h</h3><p>这是窗口界面对应的头文件，被上方的 <code>main.cpp</code> 所包含，生成代码如下：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// mainwindow.h</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">MAINWINDOW_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAINWINDOW_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QMainWindow></span>      <span class="token comment">// Qt 标准窗口类头文件</span></span>

QT_BEGIN_NAMESPACE
<span class="token comment">// mainwindow.ui 文件中也有一个类叫 MainWindow, 将这个类放到命名空间 Ui 中</span>
namespace Ui <span class="token punctuation">&#123;</span> class MainWindow<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>      <span class="token comment">// 对应的是 ui 文件中的类</span>
QT_END_NAMESPACE

class MainWindow <span class="token operator">:</span> public QMainWindow   <span class="token comment">// 继承了基础类</span>
<span class="token punctuation">&#123;</span>
    Q_OBJECT    <span class="token comment">// 这个宏是为了能够使用Qt中的信号槽机制</span>

public<span class="token operator">:</span>
    <span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> nullptr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

private<span class="token operator">:</span>
    Ui<span class="token operator">::</span>MainWindow <span class="token operator">*</span>ui<span class="token punctuation">;</span>     <span class="token comment">// 定义指针指向窗口的 UI 对象</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// MAINWINDOW_H</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>看不懂是吧？其实我们就算看得懂代码，也不知道它具体是干什么的，反正能跑就行，后面应该慢慢就知道了……</p>
<h3 id="mainwindow-cpp"><a href="#mainwindow-cpp" class="headerlink" title="mainwindow.cpp"></a>mainwindow.cpp</h3><p>这里是上面对应头文件中类的源文件：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// mainwindow.cpp</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"mainwindow.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ui_mainwindow.h"</span></span>

MainWindow<span class="token operator">::</span><span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token function">QMainWindow</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
    <span class="token punctuation">,</span> <span class="token function">ui</span><span class="token punctuation">(</span>new Ui<span class="token operator">::</span>MainWindow<span class="token punctuation">)</span>    <span class="token comment">// 基于 mainwindow.ui 创建一个实例对象</span>
                                <span class="token comment">// 相当于将 ui 对象实例化</span>
<span class="token punctuation">&#123;</span>
    <span class="token comment">// 将 mainwindow.ui 的实例对象和 this 指向的当前类的对象进行关联</span>
    <span class="token comment">// 这样同名的两个类对象就产生了关联, 合二为一了</span>
    ui<span class="token operator">-></span><span class="token function">setupUi</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// 相当于在后面操作 ui 时相当于直接操作指向的类</span>

    <span class="token comment">// 一般在 Qt 的构造函数中进行初始化操作（窗口，数据，……）</span>
<span class="token punctuation">&#125;</span>

MainWindow<span class="token operator">::</span><span class="token operator">~</span><span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    delete ui<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="mainwindow-ui"><a href="#mainwindow-ui" class="headerlink" title="mainwindow.ui"></a>mainwindow.ui</h3><p>这是一个 xml 格式的文件，在 Qt 中的每一个窗口对对应着一个可编辑的可视化界面，不过一般不需要在这里编辑，IDE 给我们提供了更简单的 Design 界面，在那里只需要拖动组件就可以了，这里还是贴出初始代码作参考：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">// mainwindow.ui

<span class="token comment">&lt;!-- 双击这个文件看到的是一个窗口界面, 如果使用文本编辑器打开看到的是一个XML格式的文件 --></span>
<span class="token comment">&lt;!-- 看不懂这种格式没关系, 我们不需要在这种模式下操作这个文件。 --></span>
<span class="token comment">&lt;!-- 这里只是给大家介绍这个文件的本质 --></span>
<span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ui</span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">></span></span>MainWindow<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>widget</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>QMainWindow<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>MainWindow<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>geometry<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x</span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>x</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>y</span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>y</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>width</span><span class="token punctuation">></span></span>800<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>width</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>height</span><span class="token punctuation">></span></span>600<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>height</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rect</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>windowTitle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">></span></span>MainWindow<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>widget</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>QWidget<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>centralwidget<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>widget</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>QMenuBar<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menubar<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>widget</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>QStatusBar<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>statusbar<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>widget</span><span class="token punctuation">></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">/></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>connections</span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ui</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Qt-的窗口类"><a href="#Qt-的窗口类" class="headerlink" title="Qt 的窗口类"></a>Qt 的窗口类</h2><p>想要为 Qt 项目添加新的窗口，首先得新建一个子类。</p>
<h3 id="三个基础窗口类"><a href="#三个基础窗口类" class="headerlink" title="三个基础窗口类"></a>三个基础窗口类</h3><p>在 IDE 中先单机项目的主文件并选中，然后在右键菜单中点击 “Add new …”，在新弹出的窗口中，选择 “Qt” 与 “设计师界面类”，并点击右下角的 “choose…” 进行下一步：</p>
<p><img src="/images/QT-learning-note-02/qwidget_1.jpg" alt="qwidget_1" loading="lazy"></p>
<p>在这里可以看到有三种类，分别是：<code>QWidget</code>、<code>QDialog</code> 和 <code>QMainWindow</code>：</p>
<p><img src="/images/QT-learning-note-02/qwidget_2.jpg" alt="qwidget_2" loading="lazy"></p>
<p>这三种类的关系如下所示：</p>
<p><img src="/images/QT-learning-note-02/qwidget_3.jpg" alt="qwidget_3" loading="lazy"><em>图片来自于苏丙榅的<a href="https://mskclover.com/2022/05/12/QT-learning-note-02/#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">入门教程</a></em></p>
<p>在创建新窗口时，需要让自己的窗口类继承上述三个窗口类中的其中一个。它们分别有如下的性质：</p>
<ul>
<li><code>QWidget</code><ul>
<li>是所有窗口的基类</li>
<li>Qt 中的控件（如按钮、输入框、单选框等）都属于窗口，其基类均为 <code>QWidget</code></li>
<li>可以内嵌到其他的窗口中 —— 没有边框</li>
<li>可以不内嵌而单独显示 —— 独立窗口，具有边框</li>
</ul>
</li>
<li><code>QDialog</code><ul>
<li>对话框类</li>
<li>不能内嵌到其他窗口中</li>
</ul>
</li>
<li><code>QMainWindow</code><ul>
<li>具有工具栏、状态栏和菜单栏</li>
<li>不能内嵌到其他窗口中</li>
</ul>
</li>
</ul>
<h3 id="窗口的显示"><a href="#窗口的显示" class="headerlink" title="窗口的显示"></a>窗口的显示</h3><p>在 Qt 中，显示窗口的方式有两种：内嵌入其他的窗口一并显示，或作为独立窗口单独显示：</p>
<ul>
<li>内嵌窗口<ul>
<li>依附于某一个大的窗口，作为了大窗口的一部分</li>
<li>大窗口就算这个内嵌窗口的父窗口</li>
<li><strong>在父窗口显示的时候，内嵌窗口也会一并显示</strong></li>
</ul>
</li>
<li>独立窗口（非内嵌）<ul>
<li>有边框，有标题栏</li>
<li>需要调用函数才可以显示</li>
</ul>
</li>
</ul>
<p>基于上面的第一个项目，现分别创建两个测试窗口以说明其区别。<code>TestWidgget</code> 和 <code>TestDialog</code> 的头文件与源代码均与上面最初的 <code>mainwindow</code> 没有大的不同，修改窗口控件也只需要在 Design 中编辑即可，此处的重点在于子窗口的两种不同的显示。以后若无更改，新窗口的自动生成代码将不会再重复贴出了。</p>
<p>因此，下面贴出控制窗口显示的 <code>mainwindow.cpp</code> 文件：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// 新的 mainwindow.cpp</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"mainwindow.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ui_mainwindow.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"testwidget.h"</span>			<span class="token comment">// 新包含了两个子类的头文件</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"testdialog.h"</span></span>

MainWindow<span class="token operator">::</span><span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token function">QMainWindow</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
    <span class="token punctuation">,</span> <span class="token function">ui</span><span class="token punctuation">(</span>new Ui<span class="token operator">::</span>MainWindow<span class="token punctuation">)</span>    <span class="token comment">// 基于 mainwindow.ui 创建一个实例对象</span>
                                <span class="token comment">// 相当于将 ui 对象实例化</span>
<span class="token punctuation">&#123;</span>
    <span class="token comment">// 将 mainwindow.ui 的实例对象和 this 指向的当前类的对象进行关联</span>
    <span class="token comment">// 这样同名的两个类对象就产生了关联, 合二为一了</span>
    ui<span class="token operator">-></span><span class="token function">setupUi</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// 相当于在后面操作 ui 时相当于直接操作指向的类</span>

    <span class="token comment">// 一般在 Qt 的构造函数中进行初始化操作（窗口，数据，……）</span>
    
    <span class="token comment">// 显示当前窗口的时候，显示另外一个窗口 TestWidget</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token number">1</span></span></span>
    <span class="token comment">// 创建窗口对象，没有给 w 对象指定父对象</span>
    <span class="token comment">// 所以这个窗口是一个独立窗口，有四周的边框</span>
    <span class="token comment">// 要显示独立窗口需要进行 show（） 操作</span>
    TestWidget<span class="token operator">*</span> w <span class="token operator">=</span> new TestWidget<span class="token punctuation">;</span>
    <span class="token comment">// 显示当前窗口</span>
    w <span class="token operator">-></span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
    <span class="token comment">// 如果在创建窗口对象的时候给其指定了父对象，这个窗口就不是一个独立窗口</span>
    <span class="token comment">// 所以在当前父窗口显示的时候，子窗口被嵌入，与父窗口一起显示出来</span>
    <span class="token comment">// 此时子窗口是没有独立边框的</span>
    TestWidget<span class="token operator">*</span> w <span class="token operator">=</span> new <span class="token function">TestWidget</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token number">1</span></span></span>
    <span class="token comment">// 创建对话框窗口</span>
    TestDialog<span class="token operator">*</span> dlg <span class="token operator">=</span> new <span class="token function">TestDialog</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 不管是否指定窗口的父对象，它都不会内嵌到主窗口中</span>
    <span class="token comment">// 非模态</span>
    dlg <span class="token operator">-></span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// 需要手动调用父类的 show()</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
    <span class="token comment">// 创建对话框窗口</span>
    TestDialog<span class="token operator">*</span> dlg <span class="token operator">=</span> new <span class="token function">TestDialog</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 模态，exec()</span>
    <span class="token comment">// 阻塞程序的执行</span>
    dlg <span class="token operator">-></span> <span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 此时无法显示主窗口，也无法切换焦点，需要关闭 dlg 窗口才会出现主窗口</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
<span class="token punctuation">&#125;</span>

MainWindow<span class="token operator">::</span><span class="token operator">~</span><span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    delete ui<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>此时代码中是有两个分支的，在两个 if 均为 1 的时候，它们均为独立窗口 —— 其中 <code>TestWidgget</code> 窗口继承了 <code>QWidget</code> 类，在没有指定父类的时候，它是独立窗口；而 <code>TestDialog</code> 窗口基础的是 <code>QDialog</code> 类，所以无论它是否指定父对象（是否在 new 后指向 <code>this</code>），它都只会是独立窗口。</p>
<p><img src="/images/QT-learning-note-02/qwidget_4.jpg" alt="qwidgt" loading="lazy"></p>
<p><em>其中 Form 窗口是 TestWidget 产生的</em></p>
<p>若给 <code>TestWidgget</code> 指定父对象（将第一个 if 置 0），则其会嵌入到主窗口中：</p>
<p><img src="/images/QT-learning-note-02/qwidget_5.jpg" alt="qwidget_5" loading="lazy"></p>
<p>现在的 <code>TestDialog</code> 是非模态显示（调用的 <code>show()</code> 函数)，若想让对话窗口改为模态显示，则需调用 <code>exec()</code> 函数（将第二个 if 置 0）：</p>
<p><img src="/images/QT-learning-note-02/qwidget_6.jpg" alt="qwidget_6" loading="lazy"></p>
<p>此时只有对话框窗口，且焦点无法切换到其他地方，只有在关闭此对话窗口以后，才会显示主窗口。</p>
<h2 id="坐标体系"><a href="#坐标体系" class="headerlink" title="坐标体系"></a>坐标体系</h2><p>Qt 的坐标体系与大多数显示一样，均以左上角为坐标原点。不过有一点特殊的是，在一个 Qt 窗口中，其中嵌入的子窗口是以父窗口的左上角为左上角为坐标原点，也就是相对坐标，而非绝对坐标：</p>
<p><img src="/images/QT-learning-note-02/coordinate_1.jpg" alt="coordinate_1" loading="lazy"><em>图片来自于苏丙榅的<a href="https://mskclover.com/2022/05/12/QT-learning-note-02/#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">入门教程</a></em></p>
<p>下面用 <code>coordinate</code> 项目作为例程示例：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// corrdinate mainwindow.cpp</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"mainwindow.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ui_mainwindow.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton></span>          <span class="token comment">// 按钮控件需要的库</span></span>

MainWindow<span class="token operator">::</span><span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token function">QMainWindow</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
    <span class="token punctuation">,</span> <span class="token function">ui</span><span class="token punctuation">(</span>new Ui<span class="token operator">::</span>MainWindow<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    ui<span class="token operator">-></span><span class="token function">setupUi</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 让窗口出现在屏幕的这个位置，没有指定则是默认居中</span>
    <span class="token comment">// 坐标原点是左上角</span>
    <span class="token comment">//this -> move(100, 100);</span>

    <span class="token comment">// 创建一个按钮，让这个按钮作为当前创建的子控件</span>
    QPushButton<span class="token operator">*</span> btnA <span class="token operator">=</span> new <span class="token function">QPushButton</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 一定要指定父对象，否则按钮就成了一个独立的窗口</span>
        											<span class="token comment">// 此时父对象依旧是主窗口</span>
    <span class="token comment">// 移动按钮的位置</span>
    <span class="token comment">// 基类 QWidget 中的 move() 函数</span>
    btnA <span class="token operator">-></span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 给按钮设置固定的大小</span>
    btnA <span class="token operator">-></span> <span class="token function">setFixedSize</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 创建第二个按钮</span>
    QPushButton<span class="token operator">*</span> btnB <span class="token operator">=</span> new <span class="token function">QPushButton</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
    btnB <span class="token operator">-></span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    btnB <span class="token operator">-></span> <span class="token function">setFixedSize</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 创建第三个按钮</span>
    QPushButton<span class="token operator">*</span> btnC <span class="token operator">=</span> new <span class="token function">QPushButton</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
    btnC <span class="token operator">-></span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    btnC <span class="token operator">-></span> <span class="token function">setFixedSize</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

MainWindow<span class="token operator">::</span><span class="token operator">~</span><span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    delete ui<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="/images/QT-learning-note-02/coordinate_2.jpg" alt="coordinate_2" loading="lazy"></p>
<p>若在代码块上方解除注释掉的代码 <code>this -&gt; move(100, 100);</code>，则窗口会以左上角为坐标原点进行显示：</p>
<p><img src="/images/QT-learning-note-02/coordinate_3.jpg" alt="coordinate_3" loading="lazy"></p>
<p>所以我们可以把整个屏幕认为是一个最大的窗口。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这次我们脱离了普通的文本编辑器，使用 Qt 官方提供的 Qt Creater 这个 IDE 进行编程，构建了第一个项目，并重点区分了三种重要的基础类与窗口的显示方式，最后以窗口的坐标体系作结。而在下一节，我们应该会学习 Qt 的数据类型与信号槽 —— 后者是 Qt 中非常重要的一部分，到那时，或许我们的 Qt 才算是真正的入门了吧。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>[1] <a target="_blank" rel="noopener" href="https://subingwen.cn/qt/qt-primer/">Qt 入门</a>，苏丙榅，爱编程的大丙，2021</p>
</div></section><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>叶子</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://mskclover.com/2022/05/12/QT-learning-note-02/" title="【QT 学习笔记02】第一个项目！">https://mskclover.com/2022/05/12/QT-learning-note-02/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> 许可协议。</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2022/05/18/question-of-graduate-student/" rel="prev" title="读硕还是直博，这是个问题"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">读硕还是直博，这是个问题</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2022/05/02/project-in-May/" rel="next" title="五月计划与简记"><span class="post-nav-text">五月计划与简记</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>如果您有任何关于博客内容的相关讨论，欢迎前往 <a href="https://github.com/misaka-clover/misaka-clover.github.io/discussions" target="_blank">GitHub Discussions</a> 与我交流。</span><br></div><style>.utterances {
  max-width: 100%;
}</style><script src="https://giscus.app/client.js" data-repo="misaka-clover/misaka-clover.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkyODk0NzI1MzM=" data-category="Announcements" data-category-id="DIC_kwDOEUEAFc4CU_3i" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-theme="preffered color scheme" crossorigin="anonymous" async></script></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2020 – 2025 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> 叶子</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v7.2.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.10.11</span></div><div class="live-time"><span>本花园已长草</span><span id="display_live_time"></span><span class="moe-text">（¯﹃¯）</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2020-08-22T19:25:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = ` ${passDay} 天 ${passHour} 小时 ${passMinute} 分 ${passSecond} 秒`;
}
blog_live_time();
</script></div><div class="footer-custom-text">博客版本：Version.2.3.1 |  <a href="https://icp.gov.moe/?keyword=20232952" target="_blank" style="color:inherit"><img src="/images/moeicp.png" width="25" style="vertical-align:middle">萌ICP备 </a><a href="https://icp.gov.moe/?keyword=20232952" target="_blank" style="color:inherit"> 20232952 号</a> </div><div class="footer-support"><span>由好人一生平安的</span><a class="footer-support-logo" href="https://www.cloudflare.com/" target="blank" title="Cloudflare"><img height="30" src="/images/CF_logo_stacked_blktype.svg" alt="Cloudflare"></a><span>提供免费的 CDN 加速</span></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" target="_blank" rel="noopener" href="https://www.google.com/search?q=site:mskclover.com" title="搜索"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:search-line"></span></span></a><script>function initMourn() {
  const date = new Date();
  const today = (date.getMonth() + 1) + "-" + date.getDate()
  const mourn_days = ["4-4","9-18","6-4"]
  if (mourn_days.includes(today)) {
    document.documentElement.style.filter = "grayscale(1)";
  }
}
initMourn();</script><script src="https://fastly.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script>const images = [...document.querySelectorAll('.markdown-body img')]
mediumZoom(images)</script><style>.medium-zoom-image {
  z-index: 99;
}</style></body></html>